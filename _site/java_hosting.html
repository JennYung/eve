<!DOCTYPE HTML>
<html>
<head>
  <title>Eve - Hosting </title>
  <link rel="shortcut icon" href="img/favicon.ico" >
  <link type="text/css" rel="stylesheet" href="css/style.css"> 
  
  <meta name="title" content="Eve - Hosting">   
  <meta name="keywords" content="eve, agent, software agent, software agents, agent platform, scalable, multiplatform, multipurpose, web based, cloud, http, json, json-rpc, opensource, open source" >
  <meta name="description" content="Eve is a multipurpose, web based agent platform. The project aims to develop an open protocol for communication between software agents. Eve is designed as a decentral, scalable system for autonomously acting agents. Eve uses the existing world wide web as platform, and uses existing protocols for data exchange (HTTP) and for messaging (JSON-RPC)." >
  <meta name="author" content="Almende B.V." >

</head>

<body>

<a href="https://github.com/almende/eve" style="position: fixed; top: 0; right: 0; border: 0;" >
  <img 
    src="img/forkme_right_darkblue_121621.png" 
    alt="Fork me on GitHub" >
</a>
  
<div id="container">

<div id="menu">
<div id="menu-inner">

<a href="http://almende.github.com/eve"><img src="img/logo/eve128.png" alt="logo"></a>
<br>

<div class="nav">
<ul>
  <li>
    Eve
    <ul>
      <li><a class="nav" href="index.html">Introduction</a></li>
      <li><a class="nav" href="protocol.html">Protocol</a></li>
      <!--<li><a class="nav" href="comparison.html">Comparison</a></li>-->
    </ul>
  </li>

  <li>
    Java
    <ul>
      <li><a class="nav" href="java_overview.html">Overview</a></li>
      <li><a class="nav" href="java_gettingstarted.html">Getting Started</a></li>
      <li><a class="nav" href="java_libraries.html">Libraries</a></li>
      <li><a class="nav" href="java_hosting.html">Hosting</a></li>
      <li><a class="nav" href="java_agents.html">Agents</a></li>
      <!--<li><a class="nav" href="java_examples.html">Examples</a></li>-->
    </ul>
  </li>

  <li>
    Node.js
    <ul>
      <li><a class="nav" href="nodejs_overview.html">Overview</a></li>
    </ul>    
  </li>
</ul>
</div>

</div>
</div>

<div id="contents">
  <h1 id='hosting'>Hosting</h1>

<p>In Java, Eve agents are hosted via a web servlet. Eve comes with two ready-made servlets: a SingleAgentServlet and a MultiAgentServlet. These servlets are located in the eve-core.jar library. Furthermore, one can create its own custom servlet when needed.</p>

<h2 id='SingleAgentServlet'>SingleAgentServlet</h2>

<p>The <em>SingleAgentServlet</em> will host a single agent which can be accessed directly via the servlet url (http://server/servlet). The SingleAgentServlet is a regular Java servlet, and needs to be configured in the web.xml file in your project (typically located at war/WEB-INF/).</p>

<p>To configure the SingleAgentServlet, add the following lines to the web.xml file, inside the &#60;web-app&#62; tag:</p>

<pre><code>&lt;servlet&gt;
  &lt;servlet-name&gt;SingleAgentServlet&lt;/servlet-name&gt;
  &lt;servlet-class&gt;com.almende.eve.servlet.SingleAgentServlet&lt;/servlet-class&gt;
  &lt;init-param&gt;
    &lt;description&gt;The agent class served by the servlet&lt;/description&gt; 
    &lt;param-name&gt;agent&lt;/param-name&gt;
    &lt;param-value&gt;com.almende.eve.agent.example.EchoAgent&lt;/param-value&gt;
  &lt;/init-param&gt;
  &lt;init-param&gt;
    &lt;description&gt;The context for reading and writing persistent data&lt;/description&gt; 
    &lt;param-name&gt;context&lt;/param-name&gt;
    &lt;param-value&gt;com.almende.eve.context.MemoryContext&lt;/param-value&gt;
  &lt;/init-param&gt;	  
&lt;/servlet&gt;  
&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;SingleAgentServlet&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/testagent&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>

<p>Note the folllowing:</p>

<ul>
<li>
<p>The servlet configuration contains two initialization parameters <em>agent</em> and <em>context</em>. The parameter <em>agent</em> contains the Java class of the agent that will be hosted by the servlet. The parameter <em>context</em> specifies a Context class, which determines the type of the context available to the Agent for persisting its state.</p>
</li>

<li>
<p>The <em>url-pattern</em> can be freely chosen. This determines the url at which the servlet is running, and thus at which the agent can be found.</p>
</li>
</ul>

<h2 id='MultiAgentServlet'>MultiAgentServlet</h2>

<p>The <em>MultiAgentServlet</em> can host multiple agent classes and multiple instances of each agent class. To adress an instance of an agent, the url is built up with the servlet path, agent class name, and id of the agent (http://server/servlet/agentclass/agentid).</p>

<p>A MultiAgentServlet is a regular Java servlet. To configure the servlet, add the following lines to the web.xml file, inside the &#60;web-app&#62; tag:</p>

<pre><code>&lt;servlet&gt;
  &lt;servlet-name&gt;MultiAgentServlet&lt;/servlet-name&gt;
  &lt;servlet-class&gt;com.almende.eve.servlet.MultiAgentServlet&lt;/servlet-class&gt;
  &lt;init-param&gt;
    &lt;description&gt;The agent classes served by the servlet&lt;/description&gt; 
    &lt;param-name&gt;agents&lt;/param-name&gt;
    &lt;param-value&gt;
      com.almende.eve.agent.example.EchoAgent;
      com.almende.eve.agent.example.CalcAgent;
      com.almende.eve.agent.example.ChatAgent;
      com.almende.eve.agent.LogAgent;
    &lt;/param-value&gt;
  &lt;/init-param&gt;
  &lt;init-param&gt;
    &lt;description&gt;The context for reading and writing persistent data&lt;/description&gt; 
    &lt;param-name&gt;context&lt;/param-name&gt;
    &lt;param-value&gt;com.almende.eve.context.MemoryContext&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;MultiAgentServlet&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/agents/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>

<p>Note that:</p>

<ul>
<li>
<p>The MultiAgentServlet configuration needs two initialization parameters: <em>agents</em> and <em>context</em>. The <em>agents</em> parameter contains a list with the agent classes which will be hosted by the servlet. The classes must be separated by a semicolon. Eve comes with a number of example agents, such as the CalcAgent and the EchoAgent, so you can use these to test if your application works. The <em>context</em> parameter specifies the context that will be available for the agents to persist their state.</p>
</li>

<li>
<p>The <em>url-pattern</em> can be freely chosen. This determines the url at which the servlet is running. It is important to end the url with the pattern /*, as the url of the servlet will end with the class name and id of the agent.</p>
</li>
</ul>

<h2 id='custom'>Custom servlet</h2>

<p>If the SingleAgentServlet and the MultiAgentServlet do not fulfill your needs, it is possible to develop a custom servlet. This can for example be useful when exposing an existing service via a JSON-RPC interface to the Eve world. When creating a custom servlet, it is possible to get a better performance, as the servlet can be integrated tightly with the service. It is not necessary to have a real Eve agent running via the servlet, the essence is that a service exposes a JSON-RPC interface to the outside world.</p>
  
  <div class="lastupdate">
  Last updated: 16 April 2012
  </div>
</div>

</div>
</body>
</html>
